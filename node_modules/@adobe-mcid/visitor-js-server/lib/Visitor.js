"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _visitorJsShared=require("@adobe-mcid/visitor-js-shared"),_amcvCookie=require("./amcv-cookie"),_targetAdapter=require("./target-adapter"),_targetAdapter2=_interopRequireDefault(_targetAdapter),_visitorPayload=require("./visitor-payload"),_visitorPayload2=_interopRequireDefault(_visitorPayload),_utils=require("./utils");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2016 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property 
* laws, including trade secret and copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/var CONSUMER_ID_BASE="payload:",AMCV_PREFIX="AMCV_";function Visitor(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:(0,_utils.throwError)("Visitor requires an Org ID!"),b={},c=(0,_utils.normalizeOrgId)(a),d=function d(h){return b=Object.assign({},b,h)},e=(0,_visitorJsShared.supplementalDataIDFactory)(),f=function f(){var h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:(0,_utils.throwError)("sdidConsumerID is required"),i=e.getID(""+CONSUMER_ID_BASE+h),j=e.getState();return d({sdid:j}),i},g=function g(h,i){var j=f(h),k=(0,_amcvCookie.pickValues)(i,["MCMID","MCAAMB","MCAAMLH"]),_b=b,l=_b.customerIDs;return{sdid:j,amcvValues:k,customerIDs:l}};this.generatePayload=function(_ref){var h=_ref.sdidConsumerID,i=_ref.amcvCookie,j=g(h,i);return(0,_visitorPayload2.default)(j,_targetAdapter2.default.adapt)},this.generateBatchPayload=function(_ref2){var h=_ref2.sdidConsumerID,i=_ref2.amcvCookie,_ref2$mboxNames=_ref2.mboxNames,j=void 0===_ref2$mboxNames?(0,_utils.throwError)("mboxNames is required"):_ref2$mboxNames,k=g(h,i),l=_targetAdapter2.default.adaptToBatch.bind(_targetAdapter2.default,j);return(0,_visitorPayload2.default)(k,l)},this.setCustomerIDs=function(){var h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};d({customerIDs:h})},this.getState=function(){return _defineProperty({},c,b)},this.getCookieName=function(){return AMCV_PREFIX+c}}Visitor.AuthState=_visitorJsShared.AuthState;exports.default=Visitor;module.exports=exports["default"];